<div data-role="page" id="page-main">

  <div data-role="header">
    <h1>Title</h1>
  </div><!-- Header -->
  
  <div data-role="content">
    <ul data-role="listview" id="todo-list">
      <li id="todo-template" style="display: none">
        <a href="#data">
          <h3 class="todo-title">hogehoge</h3>
          <p class="todo-desc">fuga</p>
        </a>
      </li>
    </ul>
  </div><!-- Content -->
  
  <div data-role="footer" role="contentinfo">
    <div data-role="navbar" role="navigation">
      <ul>
        <li>
          <a href="#page-new" data-rel="dialog" data-icon="plus">New</a>
        </li>
      </ul>
    </div>
  </div><!-- Footer -->

</div>

<!-- Dialog (Add new ToDo) -->
<div data-role="page" id="page-new">
  <div data-role="header">
    <h1>New ToDo</h1>
  </div>
  <div data-role="content">
      <div data-role="fieldcontain">
        <label for="input-todo-title">Title</label>
        <input type="text" name="input-todo-title" id="input-todo-title" value="" />
      </div>
      <div data-role="fieldcontain">
        <label for="input-todo-desc">Description</label>
        <textarea name="input-todo-desc" id="input-todo-desc"></textarea>
      </div>

      <input type="button" id="todo-cancel" name="todo-cancel" value="Cancel" data-inline="true" data-icon="delete">
      <input type="submit" id="todo-submit" name="todo-submit" value="Submit" data-inline="true" data-icon="check">
  </div>
</div>


<script type="text/javascript">
$(document).ready(function(){
  // Close dialog
  $('#todo-cancel').click(function () {
    $('.ui-dialog').dialog('close');
  });
  // Submit data and close dialog
  $('#todo-submit').click(function () {

    var title = "Title: " + $('#input-todo-title').val();
    var desc  = "Description: " + $('#input-todo-desc').val();

    // Add a DOM
    var dom = $("#todo-template").clone(true);
    dom.css('display', 'block');
    var childs1 = dom.find('.todo-title');
    childs1.text(title);
    var childs2 = dom.find('.todo-desc');
    childs2.text(desc);
    $("#todo-list").append(dom);
    // Post data to server
    var param = {
      title:      title,
      desc:       desc,
      created_at: new Date().toString()
    };
    $.post('/todos/create', param);
    // Close dialog
    $('.ui-dialog').dialog('close');
  });
});
</script>
